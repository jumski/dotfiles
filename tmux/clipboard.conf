# Tmux Clipboard Configuration
#
# Modern OSC 52 passthrough strategy with kitty
# Allows Neovim's native OSC 52 to work through tmux

# Enter copy mode
bind-key -n M-PPage copy-mode -u
bind-key -n M-u copy-mode

# Smart paste - detects SSH and uses appropriate method
bind-key p run-shell "~/.dotfiles/tmux/scripts/smart-paste.sh"
bind-key -n M-i run-shell "~/.dotfiles/tmux/scripts/smart-paste.sh"

# Copy - works both locally and over SSH (sends OSC 52 when needed)
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "~/.dotfiles/tmux/scripts/copy-to-clipboard.sh"
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "~/.dotfiles/tmux/scripts/copy-to-clipboard.sh"

# Note: allow-passthrough is set in settings.conf (needed for OSC 52)

# Better OSC 52 support for SSH sessions
set -ag terminal-overrides ",xterm-256color:Ms=\\E]52;c;%p2%s\\7"
