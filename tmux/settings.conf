# Tmux Core Settings
# Basic configuration, behavior, and performance settings

# Prefix key
set -g prefix C-q
unbind C-b

# Reload configuration
unbind r
bind r source-file ~/.tmux.conf \; display-message "Configuration reloaded!"

# Terminal features
set-option -sa terminal-features ',xterm-kitty:RGB'
set-option -g default-shell /usr/bin/fish

# Vi mode and mouse
setw -g mode-keys vi
set -g mouse on

# Status line position
set-option -g status-position bottom

# Passthrough for terminal features (needed for OSC 52 clipboard over SSH)
# Note: focus-events leak into Claude Code is handled by claude.fish wrapper
# which disables focus-events per-pane during Claude Code sessions
set-option -g allow-passthrough on

# Performance settings
set -s escape-time 0
set -g history-limit 1000000

# Refresh status bar on session switch (for last_session segment)
# Currently ~16ms, may affect performance if powerline segments become heavier
set-hook -g client-session-changed 'refresh-client -S'

# Window and pane indexing
set -g base-index 1
set -g pane-base-index 1

# Window behavior
setw -g automatic-rename off
set-window-option -g automatic-rename off
set-option -g allow-rename off
set -g detach-on-destroy off
set -g main-pane-width 130

# Focus events (required by neovim autoread)
set-option -g focus-events on
